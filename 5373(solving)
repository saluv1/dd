#include <bits/stdc++.h>
using namespace std;

int n,m;
char arr[7][4][4];
void counter_clock(int k)
{
    char temp[4][4];
    for(int i=1;i<=3;i++)
    {
        for(int j=1;j<=3;j++)
        temp[4-j][i]=arr[k][i][j];
    }
    for(int i=1;i<=3;i++)
    {
        for(int j=1;j<=3;j++)
        arr[k][i][j]=temp[i][j];
    }
    char temp_1[4];
    if(k==1)
    {
        for(int i=1;i<=3;i++)
        temp_1[i]=arr[3][1][i];
        for(int i=1;i<=3;i++)
        arr[3][1][i]=arr[5][1][i];
        for(int i=1;i<=3;i++)
        arr[5][1][i]=arr[4][1][i];
        for(int i=1;i<=3;i++)
        arr[4][1][i]=arr[6][1][i];
        for(int i=1;i<=3;i++)
        arr[6][1][i]=temp_1[i];
    }
    else if(k==2)
    {
        for(int i=1;i<=3;i++)
        temp_1[i]=arr[3][3][i];
        for(int i=1;i<=3;i++)
        arr[3][3][i]=arr[6][3][i];
        for(int i=1;i<=3;i++)
        arr[6][3][i]=arr[4][3][i];
        for(int i=1;i<=3;i++)
        arr[4][3][i]=arr[5][3][i];
        for(int i=1;i<=3;i++)
        arr[5][3][i]=temp_1[i];
    }
    else if(k==3)
    {
        for(int i=1;i<=3;i++)
        temp_1[i]=arr[1][3][i];
        for(int i=1;i<=3;i++)
        arr[1][3][i]=arr[6][i][1];
        for(int i=1;i<=3;i++)
        arr[6][i][1]=arr[2][1][4-i];
        for(int i=1;i<=3;i++)
        arr[2][1][4-1]=arr[3][4-i][3];
        for(int i=1;i<=3;i++)
        arr[3][4-i][3]=temp_1[i];
    }
    else if(k==4)
    {

    }
    else if(k==5)
    {

    }
    else
    {

    }
}

void clock(int k)
{
    char temp[4][4];
    for(int i=1;i<=3;i++)
    {
        for(int j=1;j<=3;j++)
        temp[j][4-i]=arr[k][i][j];
    }
    for(int i=1;i<=3;i++)
    {
        for(int j=1;j<=3;j++)
        arr[k][i][j]=temp[i][j];
    }
}
int main()
{
    ios::sync_with_stdio(false);
    cin.tie(0);
    cout.tie(0);
    cin>>n;
    for(int q1=1;q1<=n;q1++)
    {
        for(int i=1;i<=3;i++)
        {
            for(int j=1;j<=3;j++)
            {
                arr[1][i][j]='w';
                arr[2][i][j]='y';
                arr[3][i][j]='r';
                arr[4][i][j]='o';
                arr[5][i][j]='g';
                arr[6][i][j]='b';
            }
        }
        cin>>m;
        int face=1;
        int clock1=1;
        for(int q2=1;q2<=m;q2++)
        {
            string s;
            cin>>s;
            if(s[0]=='U')
            face=1;
            else if(s[0]=='D')
            face=2;
            else if(s[0]=='F')
            face=3;
            else if(s[0]=='B')
            face=4;
            else if(s[0]=='L')
            face=5;
            else
            face=6;

            if(s[1]=='+')
            clock1=1;
            else
            clock1=-1;

            if(clock1==1)
            clock(face);
            else
            counter_clock(face);
        }
        for(int i=1;i<=3;i++)
        {
            for(int j=1;j<=3;j++)
            cout<<arr[1][i][j];
            cout<<'\n';
        }
    }
}
